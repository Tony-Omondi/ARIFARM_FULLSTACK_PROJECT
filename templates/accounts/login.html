{% extends 'base.html' %}
{% load static %}

{% block title %}Login - Oreg Organic Shop{% endblock %}

{% block content %}

<section class="page-wrapper de-padding">
    <div class="container">

        <!-- Breadcrumb -->
        <div class="site-breadcrumb" style="background: url({% static 'assets/img/breadcrumb/breadcrumb.jpg' %})">
            <div class="container">
                <h2 class="breadcrumb-title">Welcome Back</h2>
                <ul class="breadcrumb-menu clearfix">
                    <li><a href="{% url 'home' %}">Home</a></li>
                    <li class="active">Login</li>
                </ul>
            </div>
        </div>

        <!-- Login Area -->
        <div class="reg-area bg de-padding">
            <div class="container">
                <div class="reg-wpr grid-center">
                    <div class="login-form text-center" style="max-width: 480px; margin: 0 auto;">

                        <!-- Logo -->
                        <i class="header-icon mb-30">
                            <img src="{% static 'assets/img/logo/logo.png' %}" alt="Oreg Organic Shop" style="height: 60px;">
                        </i>

                        <h3 style="color: #37582D; font-weight: 600;">Login to Your Account</h3>
                        <p class="text-muted mb-40">Enter your credentials to access your account</p>

                        <!-- Messages -->
                        {% if messages %}
                            {% for message in messages %}
                            <div class="alert mb-20" style="border-radius: 12px; padding: 15px; {% if message.tags == 'success' %}background: #d4edda; color: #155724;{% else %}background: #f8d7da; color: #721c24;{% endif %}">
                                {{ message }}
                            </div>
                            {% endfor %}
                        {% endif %}

                        <!-- Login Form -->
                        <form method="post">
                            {% csrf_token %}
                            <div class="mb-20">
                                <input type="text" name="email" class="form-control" placeholder="Email Address" required 
                                       style="height: 56px; border-radius: 12px; font-size: 16px; padding: 0 20px;">
                            </div>
                            <div class="mb-20">
                                <input type="password" name="password" class="form-control" placeholder="Password" required 
                                       style="height: 56px; border-radius: 12px; font-size: 16px; padding: 0 20px;">
                            </div>

                            <div class="d-flex justify-content-between align-items-center mb-30">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="remember_me" name="remember_me">
                                    <label class="form-check-label" for="remember_me" style="font-size: 14px; color: #555;">
                                        Remember Me
                                    </label>
                                </div>
                                <a href="{% url 'password_reset' %}" class="text-decoration-underline" style="color: #37582D; font-size: 14px;">
                                    Forgot Password?
                                </a>
                            </div>

                            <button type="submit" class="btn-6 w-100 mb-20" style="height: 56px; font-size: 17px; font-weight: 600;">
                                Login to Account
                            </button>

                            <p class="text-center text-muted mb-30">
                                Don't have an account? 
                                <a href="{% url 'email_register' %}" style="color: #37582D; font-weight: 600;">Sign Up Now</a>
                            </p>

                            <!-- Divider -->
                            <div class="text-center position-relative mb-30">
                                <hr>
                                <span style="background: white; padding: 0 15px; position: absolute; top: -12px; left: 50%; transform: translateX(-50%); color: #999; font-size: 14px;">
                                    Or continue with
                                </span>
                            </div>

                            <!-- Google Login Button (Beautiful) -->
                            <a href="{% url 'social:begin' 'google-oauth2' %}" 
                               class="btn w-100 d-flex align-items-center justify-content-center" 
                               style="height: 56px; background: white; border: 2px solid #ddd; border-radius: 12px; font-size: 16px; color: #333; font-weight: 500; transition: all 0.3s;">
                                <img src="https://www.google.com/favicon.ico" alt="Google" width="20" height="20" class="me-3">
                                Continue with Google
                            </a>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Remember Me Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const rememberMe = document.getElementById('remember_me');
    const emailField = document.querySelector('input[name="email"]');
    const savedEmail = localStorage.getItem('saved_email');

    if (savedEmail) {
        emailField.value = savedEmail;
        rememberMe.checked = true;
    }

    document.querySelector('form').addEventListener('submit', function() {
        if (rememberMe.checked && emailField.value) {
            localStorage.setItem('saved_email', emailField.value);
        } else {
            localStorage.removeItem('saved_email');
        }
    });
});
</script>

{% endblock %}