{% load static %}

<aside class="off-canvas-wrapper" id="mobileMenu">
    
    <div class="off-canvas-overlay" onclick="toggleMenu()"></div>
    
    <div class="off-canvas-inner-content">
        <div class="off-canvas-header">
            <div class="logo-area">
                <a href="{% url 'home' %}">
                    <img src="{% static 'assets/images/logo/logo.png' %}" alt="AriFarm Logo" style="max-height: 40px;">
                </a>
            </div>
            <div class="btn-close-off-canvas" onclick="toggleMenu()">
                <i class="fa fa-times"></i>
            </div>
        </div>

        <div class="off-canvas-scrollable">
            
            <div class="mobile-navigation">
                <nav>
                    <ul class="mobile-menu">
                        {% with request.resolver_match.url_name as url_name %}

                        <li class="{% if url_name == 'home' %}active-menu{% endif %}">
                            <a href="{% url 'home' %}">Home</a>
                        </li>
                        <li class="{% if url_name == 'product_list' or url_name == 'product_detail' %}active-menu{% endif %}">
                            <a href="{% url 'products:product_list' %}">Shop All Products</a>
                        </li>
                        <li class="{% if url_name == 'basket_list' %}active-menu{% endif %}">
                            <a href="{% url 'products:basket_list' %}">Combo Offers</a>
                        </li>
                        <li class="{% if url_name == 'recipe_list' %}active-menu{% endif %}">
                            <a href="{% url 'products:recipe_list' %}">Recipes</a>
                        </li>
                        <li class="{% if url_name == 'gallery' %}active-menu{% endif %}">
                            <a href="{% url 'gallery' %}">Gallery</a>
                        </li>

                        <li class="divider"></li>

                        <li class="{% if url_name == 'about' %}active-menu{% endif %}">
                            <a href="{% url 'about' %}">About Us</a>
                        </li>
                        <li class="{% if url_name == 'contact' %}active-menu{% endif %}">
                            <a href="{% url 'contact' %}">Contact</a>
                        </li>

                        <li class="user-section">
                            {% if user.is_authenticated %}
                                <div class="user-info">
                                    <i class="fa fa-user-circle"></i> Hello, {{ user.first_name|default:user.username }}
                                </div>
                                <a href="{% url 'profile' %}" class="btn-login" style="margin-top: 10px; display: inline-block;">My Account</a>
                                {% if user.is_staff %}
                                    <a href="{% url 'products:admin_dashboard' %}" class="admin-link">Admin Dashboard</a>
                                {% endif %}
                                <a href="{% url 'logout' %}" class="logout-link">Logout</a>
                            {% else %}
                                <div class="auth-buttons">
                                    <a href="{% url 'login' %}" class="btn-login">Login</a>
                                    <a href="{% url 'email_register' %}" class="btn-register">Register</a>
                                </div>
                            {% endif %}
                        </li>

                        {% endwith %}
                    </ul>
                </nav>
            </div>

            <div class="offcanvas-widget-area">
                <div class="contact-info">
                    <p><i class="fa fa-map-marker"></i> Nairobi, Kenya</p>
                    <p><i class="fa fa-phone"></i> <a href="tel:+254700000000">+254 700 000 000</a></p>
                    <p><i class="fa fa-envelope"></i> <a href="mailto:info@arifarm.co.ke">info@arifarm.co.ke</a></p>
                </div>
                <div class="social-icons">
                    <a href="#"><i class="fa fa-facebook-f"></i></a>
                    <a href="#"><i class="fa fa-twitter"></i></a>
                    <a href="#"><i class="fa fa-instagram"></i></a>
                    <a href="#"><i class="fa fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
    </div>
</aside>